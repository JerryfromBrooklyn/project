const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browser-BM5Us1MO.js","assets/react-vendor-A5uOPIs8.js","assets/Dashboard-kjILCAtD.js","assets/ui-vendor-CgFX2fHc.js","assets/aws-vendor-BQ6H-t6f.js"])))=>i.map(i=>d[i]);
import{j as c,X as Ir,A as er,m as W,a as Ct,U as Dr,C as Pe,b as Lr,M as Ur,L as dt,R as Br,E as $t,c as Rt,S as Mr,d as Fr,e as zr,Z as Vr,T as qr,f as Gr,g as It,I as Hr,h as Jr}from"./ui-vendor-CgFX2fHc.js";import{a as Wr,g as tr,c as z,b as Kr,r as D,u as rr,L as ve,B as Yr,R as Qr,d as st,N as xt,e as Xr}from"./react-vendor-A5uOPIs8.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=t(n);fetch(n.href,i)}})();var ut={},Dt=Wr;ut.createRoot=Dt.createRoot,ut.hydrateRoot=Dt.hydrateRoot;const Zr="modulepreload",es=function(s){return"/"+s},Lt={},ge=function(e,t,r){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");n=Promise.allSettled(t.map(l=>{if(l=es(l),l in Lt)return;Lt[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":Zr,u||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),u)return new Promise((p,m)=>{f.addEventListener("load",p),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return n.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},ts=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>ge(async()=>{const{default:r}=await Promise.resolve().then(()=>Te);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class jt extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class rs extends jt{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class ss extends jt{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class ns extends jt{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ht;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(ht||(ht={}));var is=function(s,e,t,r){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(f){o(f)}}function l(d){try{u(r.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):n(d.value).then(a,l)}u((r=r.apply(s,e||[])).next())})};class os{constructor(e,{headers:t={},customFetch:r,region:n=ht.Any}={}){this.url=e,this.headers=t,this.region=n,this.fetch=ts(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return is(this,void 0,void 0,function*(){try{const{headers:n,method:i,body:o}=t;let a={},{region:l}=t;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let u;o&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(a["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(a["Content-Type"]="application/json",u=JSON.stringify(o)));const d=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),n),body:u}).catch(w=>{throw new rs(w)}),f=d.headers.get("x-relay-error");if(f&&f==="true")throw new ss(d);if(!d.ok)throw new ns(d);let p=((r=d.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),m;return p==="application/json"?m=yield d.json():p==="application/octet-stream"?m=yield d.blob():p==="text/event-stream"?m=d:p==="multipart/form-data"?m=yield d.formData():m=yield d.text(),{data:m,error:null}}catch(n){return{data:null,error:n}}})}}var q={},kt={},Je={},Be={},We={},Ke={},as=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Se=as();const ls=Se.fetch,sr=Se.fetch.bind(Se),nr=Se.Headers,cs=Se.Request,ds=Se.Response,Te=Object.freeze(Object.defineProperty({__proto__:null,Headers:nr,Request:cs,Response:ds,default:sr,fetch:ls},Symbol.toStringTag,{value:"Module"})),us=tr(Te);var Ye={};Object.defineProperty(Ye,"__esModule",{value:!0});let hs=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Ye.default=hs;var ir=z&&z.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Ke,"__esModule",{value:!0});const fs=ir(us),ps=ir(Ye);let gs=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=fs.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let n=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,l;let u=null,d=null,f=null,p=i.status,m=i.statusText;if(i.ok){if(this.method!=="HEAD"){const k=await i.text();k===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=k:d=JSON.parse(k))}const y=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),b=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");y&&b&&b.length>1&&(f=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,f=null,p=406,m="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const y=await i.text();try{u=JSON.parse(y),Array.isArray(u)&&i.status===404&&(d=[],u=null,p=200,m="OK")}catch{i.status===404&&y===""?(p=204,m="No Content"):u={message:y}}if(u&&this.isMaybeSingle&&(!((l=u?.details)===null||l===void 0)&&l.includes("0 rows"))&&(u=null,p=200,m="OK"),u&&this.shouldThrowOnError)throw new ps.default(u)}return{error:u,data:d,count:f,status:p,statusText:m}});return this.shouldThrowOnError||(n=n.catch(i=>{var o,a,l;return{error:{message:`${(o=i?.name)!==null&&o!==void 0?o:"FetchError"}: ${i?.message}`,details:`${(a=i?.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=i?.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}};Ke.default=gs;var ms=z&&z.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(We,"__esModule",{value:!0});const ys=ms(Ke);let bs=class extends ys.default{select(e){let t=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:i=n}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const i=typeof n>"u"?"offset":`${n}.offset`,o=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:i=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${l};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};We.default=bs;var vs=z&&z.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Be,"__esModule",{value:!0});const ws=vs(We);let _s=class extends ws.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}};Be.default=_s;var xs=z&&z.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Je,"__esModule",{value:!0});const Ne=xs(Be);let js=class{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=t,this.schema=r,this.fetch=n}select(e,{head:t=!1,count:r}={}){const n=t?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new Ne.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:r=!0}={}){const n="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new Ne.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:i=!0}={}){const o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&a.push(this.headers.Prefer),n&&a.push(`count=${n}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(l.length>0){const u=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Ne.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const r="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),this.headers.Prefer=n.join(","),new Ne.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Ne.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Je.default=js;var Qe={},Xe={};Object.defineProperty(Xe,"__esModule",{value:!0});Xe.version=void 0;Xe.version="0.0.0-automated";Object.defineProperty(Qe,"__esModule",{value:!0});Qe.DEFAULT_HEADERS=void 0;const ks=Xe;Qe.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${ks.version}`};var or=z&&z.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(kt,"__esModule",{value:!0});const Es=or(Je),Ss=or(Be),Ts=Qe;let As=class ar{constructor(e,{headers:t={},schema:r,fetch:n}={}){this.url=e,this.headers=Object.assign(Object.assign({},Ts.DEFAULT_HEADERS),t),this.schemaName=r,this.fetch=n}from(e){const t=new URL(`${this.url}/${e}`);return new Es.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new ar(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:n=!1,count:i}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let l;r||n?(o=r?"HEAD":"GET",Object.entries(t).filter(([d,f])=>f!==void 0).map(([d,f])=>[d,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([d,f])=>{a.searchParams.append(d,f)})):(o="POST",l=t);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new Ss.default({method:o,url:a,headers:u,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};kt.default=As;var Ae=z&&z.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(q,"__esModule",{value:!0});q.PostgrestError=q.PostgrestBuilder=q.PostgrestTransformBuilder=q.PostgrestFilterBuilder=q.PostgrestQueryBuilder=q.PostgrestClient=void 0;const lr=Ae(kt);q.PostgrestClient=lr.default;const cr=Ae(Je);q.PostgrestQueryBuilder=cr.default;const dr=Ae(Be);q.PostgrestFilterBuilder=dr.default;const ur=Ae(We);q.PostgrestTransformBuilder=ur.default;const hr=Ae(Ke);q.PostgrestBuilder=hr.default;const fr=Ae(Ye);q.PostgrestError=fr.default;var Os=q.default={PostgrestClient:lr.default,PostgrestQueryBuilder:cr.default,PostgrestFilterBuilder:dr.default,PostgrestTransformBuilder:ur.default,PostgrestBuilder:hr.default,PostgrestError:fr.default};const{PostgrestClient:Ps,PostgrestQueryBuilder:ko,PostgrestFilterBuilder:Eo,PostgrestTransformBuilder:So,PostgrestBuilder:To,PostgrestError:Ao}=Os,Ns="2.11.2",Cs={"X-Client-Info":`realtime-js/${Ns}`},$s="1.0.0",pr=1e4,Rs=1e3;var ke;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(ke||(ke={}));var G;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(G||(G={}));var K;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(K||(K={}));var ft;(function(s){s.websocket="websocket"})(ft||(ft={}));var pe;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(pe||(pe={}));class Is{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const n=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+n));o=o+n;const l=r.decode(e.slice(o,o+i));o=o+i;const u=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class gr{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var R;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(R||(R={}));const Ut=(s,e,t={})=>{var r;const n=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=Ds(o,s,e,n),i),{})},Ds=(s,e,t,r)=>{const n=e.find(a=>a.name===s),i=n?.type,o=t[s];return i&&!r.includes(i)?mr(i,o):pt(o)},mr=(s,e)=>{if(s.charAt(0)==="_"){const t=s.slice(1,s.length);return Ms(e,t)}switch(s){case R.bool:return Ls(e);case R.float4:case R.float8:case R.int2:case R.int4:case R.int8:case R.numeric:case R.oid:return Us(e);case R.json:case R.jsonb:return Bs(e);case R.timestamp:return Fs(e);case R.abstime:case R.date:case R.daterange:case R.int4range:case R.int8range:case R.money:case R.reltime:case R.text:case R.time:case R.timestamptz:case R.timetz:case R.tsrange:case R.tstzrange:return pt(e);default:return pt(e)}},pt=s=>s,Ls=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},Us=s=>{if(typeof s=="string"){const e=parseFloat(s);if(!Number.isNaN(e))return e}return s},Bs=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch(e){return console.log(`JSON parse error: ${e}`),s}return s},Ms=(s,e)=>{if(typeof s!="string")return s;const t=s.length-1,r=s[t];if(s[0]==="{"&&r==="}"){let i;const o=s.slice(1,t);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>mr(e,a))}return s},Fs=s=>typeof s=="string"?s.replace(" ","T"):s,yr=s=>{let e=s;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class nt{constructor(e,t,r={},n=pr){this.channel=e,this.event=t,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Bt;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(Bt||(Bt={}));class Ie{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},n=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ie.syncState(this.state,n,i,o),this.pendingDiffs.forEach(l=>{this.state=Ie.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},n=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=Ie.syncDiff(this.state,n,i,o),a())}),this.onJoin((n,i,o)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:o})}),this.onLeave((n,i,o)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,n){const i=this.cloneDeep(e),o=this.transformState(t),a={},l={};return this.map(i,(u,d)=>{o[u]||(l[u]=d)}),this.map(o,(u,d)=>{const f=i[u];if(f){const p=d.map(b=>b.presence_ref),m=f.map(b=>b.presence_ref),w=d.filter(b=>m.indexOf(b.presence_ref)<0),y=f.filter(b=>p.indexOf(b.presence_ref)<0);w.length>0&&(a[u]=w),y.length>0&&(l[u]=y)}else a[u]=d}),this.syncDiff(i,{joins:a,leaves:l},r,n)}static syncDiff(e,t,r,n){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(i,(a,l)=>{var u;const d=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(l),d.length>0){const f=e[a].map(m=>m.presence_ref),p=d.filter(m=>f.indexOf(m.presence_ref)<0);e[a].unshift(...p)}r(a,d,l)}),this.map(o,(a,l)=>{let u=e[a];if(!u)return;const d=l.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),e[a]=u,n(a,u,l),u.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const n=e[r];return"metas"in n?t[r]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[r]=n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Mt;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(Mt||(Mt={}));var Ft;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(Ft||(Ft={}));var ee;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(ee||(ee={}));class Et{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=G.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new nt(this,K.join,this.params,this.timeout),this.rejoinTimer=new gr(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=G.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=G.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=G.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=G.errored,this.rejoinTimer.scheduleTimeout())}),this._on(K.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new Ie(this),this.broadcastEndpointURL=yr(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(d=>e?.(ee.CHANNEL_ERROR,d)),this._onClose(()=>e?.(ee.CLOSED));const l={},u={broadcast:i,presence:o,postgres_changes:(n=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(d=>d.filter))!==null&&n!==void 0?n:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},l)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:d})=>{var f;if(this.socket.setAuth(),d===void 0){e?.(ee.SUBSCRIBED);return}else{const p=this.bindings.postgres_changes,m=(f=p?.length)!==null&&f!==void 0?f:0,w=[];for(let y=0;y<m;y++){const b=p[y],{filter:{event:k,schema:N,table:v,filter:O}}=b,C=d&&d[y];if(C&&C.event===k&&C.schema===N&&C.table===v&&C.filter===O)w.push(Object.assign(Object.assign({},b),{id:C.id}));else{this.unsubscribe(),e?.(ee.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,e&&e(ee.SUBSCRIBED);return}}).receive("error",d=>{e?.(ee.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e?.(ee.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this._on(e,t,r)}async send(e,t={}){var r,n;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((n=u.body)===null||n===void 0?void 0:n.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const u=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=G.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(K.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const n=new nt(this,K.leave,{},e);n.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}async _fetchWithTimeout(e,t,r){const n=new AbortController,i=setTimeout(()=>n.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(i),o}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new nt(this,e,t,r);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var n,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:u,join:d}=K;if(r&&[a,l,u,d].indexOf(o)>=0&&r!==this._joinRef())return;let p=this._onMessage(o,t,r);if(t&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(m=>{var w,y,b;return((w=m.filter)===null||w===void 0?void 0:w.event)==="*"||((b=(y=m.filter)===null||y===void 0?void 0:y.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(m=>m.callback(p,r)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var w,y,b,k,N,v;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const O=m.id,C=(w=m.filter)===null||w===void 0?void 0:w.event;return O&&((y=t.ids)===null||y===void 0?void 0:y.includes(O))&&(C==="*"||C?.toLocaleLowerCase()===((b=t.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const O=(N=(k=m?.filter)===null||k===void 0?void 0:k.event)===null||N===void 0?void 0:N.toLocaleLowerCase();return O==="*"||O===((v=t?.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof p=="object"&&"ids"in p){const w=p.data,{schema:y,table:b,commit_timestamp:k,type:N,errors:v}=w;p=Object.assign(Object.assign({},{schema:y,table:b,commit_timestamp:k,eventType:N,new:{},old:{},errors:v}),this._getPayloadRecords(w))}m.callback(p,r)})}_isClosed(){return this.state===G.closed}_isJoined(){return this.state===G.joined}_isJoining(){return this.state===G.joining}_isLeaving(){return this.state===G.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const n=e.toLocaleLowerCase(),i={type:n,filter:t,callback:r};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Et.isEqual(n.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(K.close,{},e)}_onError(e){this._on(K.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=G.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Ut(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Ut(e.columns,e.old_record)),t}}const zs=()=>{},Vs=typeof WebSocket<"u",qs=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Gs{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=Cs,this.params={},this.timeout=pr,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=zs,this.conn=null,this.sendBuffer=[],this.serializer=new Is,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>ge(async()=>{const{default:l}=await Promise.resolve().then(()=>Te);return{default:l}},void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${ft.websocket}`,this.httpEndpoint=yr(e),t?.transport?this.transport=t.transport:this.transport=null,t?.params&&(this.params=t.params),t?.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t?.timeout&&(this.timeout=t.timeout),t?.logger&&(this.logger=t.logger),t?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const n=(r=t?.params)===null||r===void 0?void 0:r.apikey;if(n&&(this.accessTokenValue=n,this.apiKey=n),this.reconnectAfterMs=t?.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t?.encode?t.encode:(i,o)=>o(JSON.stringify(i)),this.decode=t?.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new gr(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t?.fetch),t?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=t?.worker||!1,this.workerUrl=t?.workerUrl}this.accessToken=t?.accessToken||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(Vs){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new Hs(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),ge(async()=>{const{default:e}=await import("./browser-BM5Us1MO.js").then(t=>t.b);return{default:e}},__vite__mapDeps([0,1])).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:$s}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ke.connecting:return pe.Connecting;case ke.open:return pe.Open;case ke.closing:return pe.Closing;default:return pe.Closed}}isConnected(){return this.connectionState()===pe.Open}channel(e,t={config:{}}){const r=new Et(`realtime:${e}`,t,this);return this.channels.push(r),r}push(e){const{topic:t,event:r,payload:n,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${t} ${r} (${i})`,n),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(t){let r=null;try{r=JSON.parse(atob(t.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=t,this.channels.forEach(n=>{t&&n.updateJoinPayload({access_token:t}),n.joinedOnce&&n._isJoined()&&n._push(K.access_token,{access_token:t})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(Rs,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:n,payload:i,ref:o}=t;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${n} ${o&&"("+o+")"||""}`,i),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(n,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(K.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return`${e}${r}${n}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([qs],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}}class Hs{constructor(e,t,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=ke.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class St extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function B(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}class Js extends St{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class gt extends St{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Ws=function(s,e,t,r){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(f){o(f)}}function l(d){try{u(r.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):n(d.value).then(a,l)}u((r=r.apply(s,e||[])).next())})};const br=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>ge(async()=>{const{default:r}=await Promise.resolve().then(()=>Te);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},Ks=()=>Ws(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ge(()=>Promise.resolve().then(()=>Te),void 0)).Response:Response}),mt=s=>{if(Array.isArray(s))return s.map(t=>mt(t));if(typeof s=="function"||s!==Object(s))return s;const e={};return Object.entries(s).forEach(([t,r])=>{const n=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[n]=mt(r)}),e};var me=function(s,e,t,r){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(f){o(f)}}function l(d){try{u(r.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):n(d.value).then(a,l)}u((r=r.apply(s,e||[])).next())})};const it=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),Ys=(s,e,t)=>me(void 0,void 0,void 0,function*(){const r=yield Ks();s instanceof r&&!t?.noResolveJson?s.json().then(n=>{e(new Js(it(n),s.status||500))}).catch(n=>{e(new gt(it(n),n))}):e(new gt(it(s),s))}),Qs=(s,e,t,r)=>{const n={method:s,headers:e?.headers||{}};return s==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},e?.headers),r&&(n.body=JSON.stringify(r)),Object.assign(Object.assign({},n),t))};function Me(s,e,t,r,n,i){return me(this,void 0,void 0,function*(){return new Promise((o,a)=>{s(t,Qs(e,r,n,i)).then(l=>{if(!l.ok)throw l;return r?.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>Ys(l,a,r))})})}function Ge(s,e,t,r){return me(this,void 0,void 0,function*(){return Me(s,"GET",e,t,r)})}function ae(s,e,t,r,n){return me(this,void 0,void 0,function*(){return Me(s,"POST",e,r,n,t)})}function Xs(s,e,t,r,n){return me(this,void 0,void 0,function*(){return Me(s,"PUT",e,r,n,t)})}function Zs(s,e,t,r){return me(this,void 0,void 0,function*(){return Me(s,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function vr(s,e,t,r,n){return me(this,void 0,void 0,function*(){return Me(s,"DELETE",e,r,n,t)})}var V=function(s,e,t,r){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(f){o(f)}}function l(d){try{u(r.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):n(d.value).then(a,l)}u((r=r.apply(s,e||[])).next())})};const en={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},zt={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class tn{constructor(e,t={},r,n){this.url=e,this.headers=t,this.bucketId=r,this.fetch=br(n)}uploadOrUpdate(e,t,r,n){return V(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},zt),n);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),n?.headers&&(a=Object.assign(Object.assign({},a),n.headers));const u=this._removeEmptyFolders(t),d=this._getFinalPath(u),f=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:e,body:i,headers:a},o?.duplex?{duplex:o.duplex}:{})),p=yield f.json();return f.ok?{data:{path:u,id:p.Id,fullPath:p.Key},error:null}:{data:null,error:p}}catch(i){if(B(i))return{data:null,error:i};throw i}})}upload(e,t,r){return V(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,n){return V(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let l;const u=Object.assign({upsert:zt.upsert},n),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:d}),p=yield f.json();return f.ok?{data:{path:i,fullPath:p.Key},error:null}:{data:null,error:p}}catch(l){if(B(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return V(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const n=Object.assign({},this.headers);t?.upsert&&(n["x-upsert"]="true");const i=yield ae(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:n}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new St("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(B(r))return{data:null,error:r};throw r}})}update(e,t,r){return V(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return V(this,void 0,void 0,function*(){try{return{data:yield ae(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(B(n))return{data:null,error:n};throw n}})}copy(e,t,r){return V(this,void 0,void 0,function*(){try{return{data:{path:(yield ae(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(B(n))return{data:null,error:n};throw n}})}createSignedUrl(e,t,r){return V(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),i=yield ae(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(n){if(B(n))return{data:null,error:n};throw n}})}createSignedUrls(e,t,r){return V(this,void 0,void 0,function*(){try{const n=yield ae(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:n.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(n){if(B(n))return{data:null,error:n};throw n}})}download(e,t){return V(this,void 0,void 0,function*(){const n=typeof t?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(t?.transform||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield Ge(this.fetch,`${this.url}/${n}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(B(a))return{data:null,error:a};throw a}})}info(e){return V(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield Ge(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:mt(r),error:null}}catch(r){if(B(r))return{data:null,error:r};throw r}})}exists(e){return V(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Zs(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(B(r)&&r instanceof gt){const n=r.originalError;if([400,404].includes(n?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],i=t?.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&n.push(i);const a=typeof t?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(t?.transform||{});l!==""&&n.push(l);let u=n.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${u}`)}}}remove(e){return V(this,void 0,void 0,function*(){try{return{data:yield vr(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(B(t))return{data:null,error:t};throw t}})}list(e,t,r){return V(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},en),t),{prefix:e||""});return{data:yield ae(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(B(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const rn="2.7.1",sn={"X-Client-Info":`storage-js/${rn}`};var we=function(s,e,t,r){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(f){o(f)}}function l(d){try{u(r.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):n(d.value).then(a,l)}u((r=r.apply(s,e||[])).next())})};class nn{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},sn),t),this.fetch=br(r)}listBuckets(){return we(this,void 0,void 0,function*(){try{return{data:yield Ge(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(B(e))return{data:null,error:e};throw e}})}getBucket(e){return we(this,void 0,void 0,function*(){try{return{data:yield Ge(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(B(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return we(this,void 0,void 0,function*(){try{return{data:yield ae(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(B(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return we(this,void 0,void 0,function*(){try{return{data:yield Xs(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(B(r))return{data:null,error:r};throw r}})}emptyBucket(e){return we(this,void 0,void 0,function*(){try{return{data:yield ae(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(B(t))return{data:null,error:t};throw t}})}deleteBucket(e){return we(this,void 0,void 0,function*(){try{return{data:yield vr(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(B(t))return{data:null,error:t};throw t}})}}class on extends nn{constructor(e,t={},r){super(e,t,r)}from(e){return new tn(this.url,this.headers,e,this.fetch)}}const an="2.49.1";let Re="";typeof Deno<"u"?Re="deno":typeof document<"u"?Re="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Re="react-native":Re="node";const ln={"X-Client-Info":`supabase-js-${Re}/${an}`},cn={headers:ln},dn={schema:"public"},un={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},hn={};var fn=function(s,e,t,r){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(f){o(f)}}function l(d){try{u(r.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):n(d.value).then(a,l)}u((r=r.apply(s,e||[])).next())})};const pn=s=>{let e;return s?e=s:typeof fetch>"u"?e=sr:e=fetch,(...t)=>e(...t)},gn=()=>typeof Headers>"u"?nr:Headers,mn=(s,e,t)=>{const r=pn(t),n=gn();return(i,o)=>fn(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:s;let u=new n(o?.headers);return u.has("apikey")||u.set("apikey",s),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},o),{headers:u}))})};var yn=function(s,e,t,r){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(f){o(f)}}function l(d){try{u(r.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):n(d.value).then(a,l)}u((r=r.apply(s,e||[])).next())})};function bn(s){return s.replace(/\/$/,"")}function vn(s,e){const{db:t,auth:r,realtime:n,global:i}=s,{db:o,auth:a,realtime:l,global:u}=e,d={db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},l),n),global:Object.assign(Object.assign({},u),i),accessToken:()=>yn(this,void 0,void 0,function*(){return""})};return s.accessToken?d.accessToken=s.accessToken:delete d.accessToken,d}const wr="2.68.0",je=30*1e3,yt=3,ot=yt*je,wn="http://localhost:9999",_n="supabase.auth.token",xn={"X-Client-Info":`gotrue-js/${wr}`},bt="X-Supabase-Api-Version",_r={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function jn(s){return Math.round(Date.now()/1e3)+s}function kn(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){const e=Math.random()*16|0;return(s=="x"?e:e&3|8).toString(16)})}const Q=()=>typeof window<"u"&&typeof document<"u",ue={tested:!1,writable:!1},De=()=>{if(!Q())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ue.tested)return ue.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),ue.tested=!0,ue.writable=!0}catch{ue.tested=!0,ue.writable=!1}return ue.writable};function En(s){const e={},t=new URL(s);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((n,i)=>{e[i]=n})}catch{}return t.searchParams.forEach((r,n)=>{e[n]=r}),e}const xr=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>ge(async()=>{const{default:r}=await Promise.resolve().then(()=>Te);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},Sn=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",jr=async(s,e,t)=>{await s.setItem(e,JSON.stringify(t))},Fe=async(s,e)=>{const t=await s.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},ze=async(s,e)=>{await s.removeItem(e)};function Tn(s){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",r,n,i,o,a,l,u,d=0;for(s=s.replace("-","+").replace("_","/");d<s.length;)o=e.indexOf(s.charAt(d++)),a=e.indexOf(s.charAt(d++)),l=e.indexOf(s.charAt(d++)),u=e.indexOf(s.charAt(d++)),r=o<<2|a>>4,n=(a&15)<<4|l>>2,i=(l&3)<<6|u,t=t+String.fromCharCode(r),l!=64&&n!=0&&(t=t+String.fromCharCode(n)),u!=64&&i!=0&&(t=t+String.fromCharCode(i));return t}class Ze{constructor(){this.promise=new Ze.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Ze.promiseConstructor=Promise;function Vt(s){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=s.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=t[1];return JSON.parse(Tn(r))}async function An(s){return await new Promise(e=>{setTimeout(()=>e(null),s)})}function On(s,e){return new Promise((r,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await s(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){n(o);return}}})()})}function Pn(s){return("0"+s.toString(16)).substr(-2)}function Nn(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let n="";for(let i=0;i<56;i++)n+=t.charAt(Math.floor(Math.random()*r));return n}return crypto.getRandomValues(e),Array.from(e,Pn).join("")}async function Cn(s){const t=new TextEncoder().encode(s),r=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(r);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}function $n(s){return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Rn(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const t=await Cn(s);return $n(t)}async function _e(s,e,t=!1){const r=Nn();let n=r;t&&(n+="/PASSWORD_RECOVERY"),await jr(s,`${e}-code-verifier`,n);const i=await Rn(r);return[i,r===i?"plain":"s256"]}const In=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Dn(s){const e=s.headers.get(bt);if(!e||!e.match(In))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class Tt extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function T(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class Ln extends Tt{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function Un(s){return T(s)&&s.name==="AuthApiError"}class kr extends Tt{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class ye extends Tt{constructor(e,t,r,n){super(e,r,n),this.name=t,this.status=r}}class ie extends ye{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Bn(s){return T(s)&&s.name==="AuthSessionMissingError"}class at extends ye{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ve extends ye{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class qe extends ye{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Mn(s){return T(s)&&s.name==="AuthImplicitGrantRedirectError"}class qt extends ye{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class vt extends ye{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function lt(s){return T(s)&&s.name==="AuthRetryableFetchError"}class Gt extends ye{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}var Fn=function(s,e){var t={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&e.indexOf(r)<0&&(t[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(s);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(s,r[n])&&(t[r[n]]=s[r[n]]);return t};const fe=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),zn=[502,503,504];async function Ht(s){var e;if(!Sn(s))throw new vt(fe(s),0);if(zn.includes(s.status))throw new vt(fe(s),s.status);let t;try{t=await s.json()}catch(i){throw new kr(fe(i),i)}let r;const n=Dn(s);if(n&&n.getTime()>=_r["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new Gt(fe(t),s.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new ie}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Gt(fe(t),s.status,t.weak_password.reasons);throw new Ln(fe(t),s.status||500,r)}const Vn=(s,e,t,r)=>{const n={method:s,headers:e?.headers||{}};return s==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),n.body=JSON.stringify(r),Object.assign(Object.assign({},n),t))};async function P(s,e,t,r){var n;const i=Object.assign({},r?.headers);i[bt]||(i[bt]=_r["2024-01-01"].name),r?.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(n=r?.query)!==null&&n!==void 0?n:{};r?.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await qn(s,e,t+a,{headers:i,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(l):{data:Object.assign({},l),error:null}}async function qn(s,e,t,r,n,i){const o=Vn(e,r,n,i);let a;try{a=await s(t,Object.assign({},o))}catch(l){throw console.error(l),new vt(fe(l),0)}if(a.ok||await Ht(a),r?.noResolveJson)return a;try{return await a.json()}catch(l){await Ht(l)}}function oe(s){var e;let t=null;Wn(s)&&(t=Object.assign({},s),s.expires_at||(t.expires_at=jn(s.expires_in)));const r=(e=s.user)!==null&&e!==void 0?e:s;return{data:{session:t,user:r},error:null}}function Jt(s){const e=oe(s);return!e.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=s.weak_password),e}function le(s){var e;return{data:{user:(e=s.user)!==null&&e!==void 0?e:s},error:null}}function Gn(s){return{data:s,error:null}}function Hn(s){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:n,verification_type:i}=s,o=Fn(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:r,redirect_to:n,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function Jn(s){return s}function Wn(s){return s.access_token&&s.refresh_token&&s.expires_in}var Kn=function(s,e){var t={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&e.indexOf(r)<0&&(t[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(s);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(s,r[n])&&(t[r[n]]=s[r[n]]);return t};class Yn{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=xr(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await P(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(T(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await P(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:le})}catch(r){if(T(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=Kn(e,["options"]),n=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(n.new_email=r?.newEmail,delete n.newEmail),await P(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:Hn,redirectTo:t?.redirectTo})}catch(t){if(T(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await P(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:le})}catch(t){if(T(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,n,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},d=await P(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(i=(n=e?.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:Jn});if(d.error)throw d.error;const f=await d.json(),p=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(w=>{const y=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(w.split(";")[1].split("=")[1]);u[`${b}Page`]=y}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(T(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){try{return await P(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:le})}catch(t){if(T(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await P(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:le})}catch(r){if(T(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){try{return await P(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:le})}catch(r){if(T(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:t,error:r}=await P(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:t,error:r}}catch(t){if(T(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await P(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(T(t))return{data:null,error:t};throw t}}}const Qn={getItem:s=>De()?globalThis.localStorage.getItem(s):null,setItem:(s,e)=>{De()&&globalThis.localStorage.setItem(s,e)},removeItem:s=>{De()&&globalThis.localStorage.removeItem(s)}};function Wt(s={}){return{getItem:e=>s[e]||null,setItem:(e,t)=>{s[e]=t},removeItem:e=>{delete s[e]}}}function Xn(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const xe={debug:!!(globalThis&&De()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Er extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Zn extends Er{}async function ei(s,e,t){xe.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),xe.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async n=>{if(n){xe.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,n.name);try{return await t()}finally{xe.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,n.name)}}else{if(e===0)throw xe.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new Zn(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(xe.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}Xn();const ti={url:wn,storageKey:_n,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:xn,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Kt(s,e,t){return await t()}class Ue{constructor(e){var t,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ue.nextInstanceID,Ue.nextInstanceID+=1,this.instanceID>0&&Q()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},ti),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new Yn({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=xr(n.fetch),this.lock=n.lock||Kt,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:Q()&&(!((t=globalThis?.navigator)===null||t===void 0)&&t.locks)?this.lock=ei:this.lock=Kt,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:De()?this.storage=Qn:(this.memoryStorage={},this.storage=Wt(this.memoryStorage)):(this.memoryStorage={},this.storage=Wt(this.memoryStorage)),Q()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${wr}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=En(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),Q()&&this.detectSessionInUrl&&r!=="none"){const{data:n,error:i}=await this._getSessionFromURL(t,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Mn(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=n;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return T(t)?{error:t}:{error:new kr("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,n;try{const i=await P(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(n=e?.options)===null||n===void 0?void 0:n.captchaToken}},xform:oe}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(T(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,r,n;try{let i;if("email"in e){const{email:d,password:f,options:p}=e;let m=null,w=null;this.flowType==="pkce"&&([m,w]=await _e(this.storage,this.storageKey)),i=await P(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p?.emailRedirectTo,body:{email:d,password:f,data:(t=p?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:p?.captchaToken},code_challenge:m,code_challenge_method:w},xform:oe})}else if("phone"in e){const{phone:d,password:f,options:p}=e;i=await P(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(r=p?.data)!==null&&r!==void 0?r:{},channel:(n=p?.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:oe})}else throw new Ve("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(T(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:o,options:a}=e;t=await P(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:Jt})}else if("phone"in e){const{phone:i,password:o,options:a}=e;t=await P(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:Jt})}else throw new Ve("You must provide either an email or phone number and a password");const{data:r,error:n}=t;return n?{data:{user:null,session:null},error:n}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new at}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:n})}catch(t){if(T(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,n,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await Fe(this.storage,`${this.storageKey}-code-verifier`),[r,n]=(t??"").split("/");try{const{data:i,error:o}=await P(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:oe});if(await ze(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new at}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:o})}catch(i){if(T(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:r,token:n,access_token:i,nonce:o}=e,a=await P(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:n,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:oe}),{data:l,error:u}=a;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new at}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(t){if(T(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,n,i,o;try{if("email"in e){const{email:a,options:l}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await _e(this.storage,this.storageKey));const{error:f}=await P(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=l?.data)!==null&&t!==void 0?t:{},create_user:(r=l?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:l?.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:a,options:l}=e,{data:u,error:d}=await P(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(n=l?.data)!==null&&n!==void 0?n:{},create_user:(i=l?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},channel:(o=l?.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u?.message_id},error:d}}throw new Ve("You must provide either an email or phone number.")}catch(a){if(T(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,r;try{let n,i;"options"in e&&(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await P(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:oe});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l?.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(n){if(T(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var t,r,n;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await _e(this.storage,this.storageKey)),await P(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((n=e?.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Gn})}catch(i){if(T(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new ie;const{error:n}=await P(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(T(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:n,options:i}=e,{error:o}=await P(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:i?.captchaToken}},redirectTo:i?.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:n,options:i}=e,{data:o,error:a}=await P(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:i?.captchaToken}}});return{data:{user:null,session:null,messageId:o?.message_id},error:a}}throw new Ve("You must provide either an email or phone number and a type")}catch(t){if(T(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Fe(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<ot:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,d))})}return{data:{session:e},error:null}}const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await P(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:le}):await this._useSession(async t=>{var r,n,i;const{data:o,error:a}=t;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ie}:await P(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:le})})}catch(t){if(T(t))return Bn(t)&&(await this._removeSession(),await ze(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:n,error:i}=r;if(i)throw i;if(!n.session)throw new ie;const o=n.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await _e(this.storage,this.storageKey));const{data:u,error:d}=await P(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:le});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(T(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return Vt(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ie;const t=Date.now()/1e3;let r=t,n=!0,i=null;const o=Vt(e.access_token);if(o.exp&&(r=o.exp,n=r<=t),n){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(T(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:o,error:a}=t;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new ie;const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(T(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Q())throw new qe("No browser detected.");if(e.error||e.error_description||e.error_code)throw new qe(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new qt("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new qe("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new qt("No code detected.");const{data:N,error:v}=await this._exchangeCodeForSession(e.code);if(v)throw v;const O=new URL(window.location.href);return O.searchParams.delete("code"),window.history.replaceState(window.history.state,"",O.toString()),{data:{session:N.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:n,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=e;if(!i||!a||!o||!u)throw new qe("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(a);let p=d+f;l&&(p=parseInt(l));const m=p-d;m*1e3<=je&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const w=p-f;d-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,p,d):d-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,p,d);const{data:y,error:b}=await this._getUser(i);if(b)throw b;const k={provider_token:r,provider_refresh_token:n,access_token:i,expires_in:f,expires_at:p,refresh_token:o,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:k,redirectType:e.type},error:null}}catch(r){if(T(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Fe(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:n,error:i}=t;if(i)return{error:i};const o=(r=n.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(Un(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await ze(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=kn(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,n;try{const{data:{session:i},error:o}=t;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let r=null,n=null;this.flowType==="pkce"&&([r,n]=await _e(this.storage,this.storageKey,!0));try{return await P(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(T(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(T(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:n}=await this._useSession(async i=>{var o,a,l,u,d;const{data:f,error:p}=i;if(p)throw p;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await P(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(n)throw n;return Q()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r?.url),{data:{provider:e.provider,url:r?.url},error:null}}catch(r){if(T(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,n;const{data:i,error:o}=t;if(o)throw o;return await P(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:void 0})})}catch(t){if(T(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await On(async n=>(n>0&&await An(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await P(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:oe})),(n,i)=>{const o=200*Math.pow(2,n);return i&&lt(i)&&Date.now()+o-r<je})}catch(r){if(this._debug(t,"error",r),T(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),Q()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const r=await Fe(this.storage,this.storageKey);if(this._debug(t,"session from storage",r),!this._isValidSession(r)){this._debug(t,"session is not valid"),r!==null&&await this._removeSession();return}const n=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<ot;if(this._debug(t,`session has${n?"":" not"} expired with margin of ${ot}s`),n){if(this.autoRefreshToken&&r.refresh_token){const{error:i}=await this._callRefreshToken(r.refresh_token);i&&(console.error(i),lt(i)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(t,"error",r),console.error(r);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new ie;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new Ze;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new ie;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(n,"error",i),T(i)){const o={session:null,error:i};return lt(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t,r=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await jr(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await ze(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Q()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),je);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((r.expires_at*1e3-e)/je);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${je}ms, refresh threshold is ${yt} ticks`),n<=yt&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Er)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Q()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const n=[`provider=${encodeURIComponent(t)}`];if(r?.redirectTo&&n.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&n.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await _e(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});n.push(a.toString())}if(r?.queryParams){const i=new URLSearchParams(r.queryParams);n.push(i.toString())}return r?.skipBrowserRedirect&&n.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:n,error:i}=t;return i?{data:null,error:i}:await P(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=n?.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(T(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,n;const{data:i,error:o}=t;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:u}=await P(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((n=l?.totp)===null||n===void 0)&&n.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(T(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:n,error:i}=t;if(i)return{data:null,error:i};const{data:o,error:a}=await P(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=n?.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(t){if(T(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:n,error:i}=t;return i?{data:null,error:i}:await P(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=n?.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(T(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=e?.factors||[],n=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:n,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:n},error:i}=e;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(n.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const d=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:d},error:null}}))}}Ue.nextInstanceID=0;const ri=Ue;class si extends ri{constructor(e){super(e)}}var ni=function(s,e,t,r){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(f){o(f)}}function l(d){try{u(r.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):n(d.value).then(a,l)}u((r=r.apply(s,e||[])).next())})};class ii{constructor(e,t,r){var n,i,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const a=bn(e);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,u={db:dn,realtime:hn,auth:Object.assign(Object.assign({},un),{storageKey:l}),global:cn},d=vn(r??{},u);this.storageKey=(n=d.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=mn(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new Ps(`${a}/rest/v1`,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new os(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new on(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return ni(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,storageKey:i,flowType:o,lock:a,debug:l},u,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new si({url:this.authUrl,headers:Object.assign(Object.assign({},f),u),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,flowType:o,lock:a,debug:l,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Gs(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r?.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const oi=(s,e,t)=>new ii(s,e,t);var te={exports:{}};const ai={},li=Object.freeze(Object.defineProperty({__proto__:null,default:ai},Symbol.toStringTag,{value:"Module"})),et=tr(li),ci="16.4.7",di={version:ci};var Le={};const wt=et,At=et,ui=et,hi=et,fi=di,Ot=fi.version,pi=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function gi(s){const e={};let t=s.toString();t=t.replace(/\r\n?/mg,`
`);let r;for(;(r=pi.exec(t))!=null;){const n=r[1];let i=r[2]||"";i=i.trim();const o=i[0];i=i.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),o==='"'&&(i=i.replace(/\\n/g,`
`),i=i.replace(/\\r/g,"\r")),e[n]=i}return e}function mi(s){const e=Tr(s),t=L.configDotenv({path:e});if(!t.parsed){const o=new Error(`MISSING_DATA: Cannot parse ${e} for an unknown reason`);throw o.code="MISSING_DATA",o}const r=Sr(s).split(","),n=r.length;let i;for(let o=0;o<n;o++)try{const a=r[o].trim(),l=vi(t,a);i=L.decrypt(l.ciphertext,l.key);break}catch(a){if(o+1>=n)throw a}return L.parse(i)}function yi(s){console.log(`[dotenv@${Ot}][INFO] ${s}`)}function bi(s){console.log(`[dotenv@${Ot}][WARN] ${s}`)}function He(s){console.log(`[dotenv@${Ot}][DEBUG] ${s}`)}function Sr(s){return s&&s.DOTENV_KEY&&s.DOTENV_KEY.length>0?s.DOTENV_KEY:Le.DOTENV_KEY&&Le.DOTENV_KEY.length>0?Le.DOTENV_KEY:""}function vi(s,e){let t;try{t=new URL(e)}catch(a){if(a.code==="ERR_INVALID_URL"){const l=new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development");throw l.code="INVALID_DOTENV_KEY",l}throw a}const r=t.password;if(!r){const a=new Error("INVALID_DOTENV_KEY: Missing key part");throw a.code="INVALID_DOTENV_KEY",a}const n=t.searchParams.get("environment");if(!n){const a=new Error("INVALID_DOTENV_KEY: Missing environment part");throw a.code="INVALID_DOTENV_KEY",a}const i=`DOTENV_VAULT_${n.toUpperCase()}`,o=s.parsed[i];if(!o){const a=new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${i} in your .env.vault file.`);throw a.code="NOT_FOUND_DOTENV_ENVIRONMENT",a}return{ciphertext:o,key:r}}function Tr(s){let e=null;if(s&&s.path&&s.path.length>0)if(Array.isArray(s.path))for(const t of s.path)wt.existsSync(t)&&(e=t.endsWith(".vault")?t:`${t}.vault`);else e=s.path.endsWith(".vault")?s.path:`${s.path}.vault`;else e=At.resolve(process.cwd(),".env.vault");return wt.existsSync(e)?e:null}function Yt(s){return s[0]==="~"?At.join(ui.homedir(),s.slice(1)):s}function wi(s){yi("Loading env from encrypted .env.vault");const e=L._parseVault(s);let t=Le;return s&&s.processEnv!=null&&(t=s.processEnv),L.populate(t,e,s),{parsed:e}}function _i(s){const e=At.resolve(process.cwd(),".env");let t="utf8";const r=!!(s&&s.debug);s&&s.encoding?t=s.encoding:r&&He("No encoding is specified. UTF-8 is used by default");let n=[e];if(s&&s.path)if(!Array.isArray(s.path))n=[Yt(s.path)];else{n=[];for(const l of s.path)n.push(Yt(l))}let i;const o={};for(const l of n)try{const u=L.parse(wt.readFileSync(l,{encoding:t}));L.populate(o,u,s)}catch(u){r&&He(`Failed to load ${l} ${u.message}`),i=u}let a=Le;return s&&s.processEnv!=null&&(a=s.processEnv),L.populate(a,o,s),i?{parsed:o,error:i}:{parsed:o}}function xi(s){if(Sr(s).length===0)return L.configDotenv(s);const e=Tr(s);return e?L._configVault(s):(bi(`You set DOTENV_KEY but you are missing a .env.vault file at ${e}. Did you forget to build it?`),L.configDotenv(s))}function ji(s,e){const t=Buffer.from(e.slice(-64),"hex");let r=Buffer.from(s,"base64");const n=r.subarray(0,12),i=r.subarray(-16);r=r.subarray(12,-16);try{const o=hi.createDecipheriv("aes-256-gcm",t,n);return o.setAuthTag(i),`${o.update(r)}${o.final()}`}catch(o){const a=o instanceof RangeError,l=o.message==="Invalid key length",u=o.message==="Unsupported state or unable to authenticate data";if(a||l){const d=new Error("INVALID_DOTENV_KEY: It must be 64 characters long (or more)");throw d.code="INVALID_DOTENV_KEY",d}else if(u){const d=new Error("DECRYPTION_FAILED: Please check your DOTENV_KEY");throw d.code="DECRYPTION_FAILED",d}else throw o}}function ki(s,e,t={}){const r=!!(t&&t.debug),n=!!(t&&t.override);if(typeof e!="object"){const i=new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");throw i.code="OBJECT_REQUIRED",i}for(const i of Object.keys(e))Object.prototype.hasOwnProperty.call(s,i)?(n===!0&&(s[i]=e[i]),r&&He(n===!0?`"${i}" is already defined and WAS overwritten`:`"${i}" is already defined and was NOT overwritten`)):s[i]=e[i]}const L={configDotenv:_i,_configVault:wi,_parseVault:mi,config:xi,decrypt:ji,parse:gi,populate:ki};te.exports.configDotenv=L.configDotenv;te.exports._configVault=L._configVault;te.exports._parseVault=L._parseVault;var Ei=te.exports.config=L.config;te.exports.decrypt=L.decrypt;te.exports.parse=L.parse;te.exports.populate=L.populate;te.exports=L;var Si=te.exports;const Oo=Kr(Si);var Qt={exports:{}};(function(s,e){var t=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof z<"u"&&z,r=function(){function i(){this.fetch=!1,this.DOMException=t.DOMException}return i.prototype=t,new i}();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof z<"u"&&z||{},l={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function u(h){return h&&DataView.prototype.isPrototypeOf(h)}if(l.arrayBuffer)var d=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=ArrayBuffer.isView||function(h){return h&&d.indexOf(Object.prototype.toString.call(h))>-1};function p(h){if(typeof h!="string"&&(h=String(h)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(h)||h==="")throw new TypeError('Invalid character in header field name: "'+h+'"');return h.toLowerCase()}function m(h){return typeof h!="string"&&(h=String(h)),h}function w(h){var g={next:function(){var E=h.shift();return{done:E===void 0,value:E}}};return l.iterable&&(g[Symbol.iterator]=function(){return g}),g}function y(h){this.map={},h instanceof y?h.forEach(function(g,E){this.append(E,g)},this):Array.isArray(h)?h.forEach(function(g){if(g.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+g.length);this.append(g[0],g[1])},this):h&&Object.getOwnPropertyNames(h).forEach(function(g){this.append(g,h[g])},this)}y.prototype.append=function(h,g){h=p(h),g=m(g);var E=this.map[h];this.map[h]=E?E+", "+g:g},y.prototype.delete=function(h){delete this.map[p(h)]},y.prototype.get=function(h){return h=p(h),this.has(h)?this.map[h]:null},y.prototype.has=function(h){return this.map.hasOwnProperty(p(h))},y.prototype.set=function(h,g){this.map[p(h)]=m(g)},y.prototype.forEach=function(h,g){for(var E in this.map)this.map.hasOwnProperty(E)&&h.call(g,this.map[E],E,this)},y.prototype.keys=function(){var h=[];return this.forEach(function(g,E){h.push(E)}),w(h)},y.prototype.values=function(){var h=[];return this.forEach(function(g){h.push(g)}),w(h)},y.prototype.entries=function(){var h=[];return this.forEach(function(g,E){h.push([E,g])}),w(h)},l.iterable&&(y.prototype[Symbol.iterator]=y.prototype.entries);function b(h){if(!h._noBody){if(h.bodyUsed)return Promise.reject(new TypeError("Already read"));h.bodyUsed=!0}}function k(h){return new Promise(function(g,E){h.onload=function(){g(h.result)},h.onerror=function(){E(h.error)}})}function N(h){var g=new FileReader,E=k(g);return g.readAsArrayBuffer(h),E}function v(h){var g=new FileReader,E=k(g),_=/charset=([A-Za-z0-9_-]+)/.exec(h.type),j=_?_[1]:"utf-8";return g.readAsText(h,j),E}function O(h){for(var g=new Uint8Array(h),E=new Array(g.length),_=0;_<g.length;_++)E[_]=String.fromCharCode(g[_]);return E.join("")}function C(h){if(h.slice)return h.slice(0);var g=new Uint8Array(h.byteLength);return g.set(new Uint8Array(h)),g.buffer}function H(){return this.bodyUsed=!1,this._initBody=function(h){this.bodyUsed=this.bodyUsed,this._bodyInit=h,h?typeof h=="string"?this._bodyText=h:l.blob&&Blob.prototype.isPrototypeOf(h)?this._bodyBlob=h:l.formData&&FormData.prototype.isPrototypeOf(h)?this._bodyFormData=h:l.searchParams&&URLSearchParams.prototype.isPrototypeOf(h)?this._bodyText=h.toString():l.arrayBuffer&&l.blob&&u(h)?(this._bodyArrayBuffer=C(h.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(h)||f(h))?this._bodyArrayBuffer=C(h):this._bodyText=h=Object.prototype.toString.call(h):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof h=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l.searchParams&&URLSearchParams.prototype.isPrototypeOf(h)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l.blob&&(this.blob=function(){var h=b(this);if(h)return h;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var h=b(this);return h||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(l.blob)return this.blob().then(N);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var h=b(this);if(h)return h;if(this._bodyBlob)return v(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(O(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},l.formData&&(this.formData=function(){return this.text().then(J)}),this.json=function(){return this.text().then(JSON.parse)},this}var U=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function X(h){var g=h.toUpperCase();return U.indexOf(g)>-1?g:h}function $(h,g){if(!(this instanceof $))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');g=g||{};var E=g.body;if(h instanceof $){if(h.bodyUsed)throw new TypeError("Already read");this.url=h.url,this.credentials=h.credentials,g.headers||(this.headers=new y(h.headers)),this.method=h.method,this.mode=h.mode,this.signal=h.signal,!E&&h._bodyInit!=null&&(E=h._bodyInit,h.bodyUsed=!0)}else this.url=String(h);if(this.credentials=g.credentials||this.credentials||"same-origin",(g.headers||!this.headers)&&(this.headers=new y(g.headers)),this.method=X(g.method||this.method||"GET"),this.mode=g.mode||this.mode||null,this.signal=g.signal||this.signal||function(){if("AbortController"in a){var x=new AbortController;return x.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&E)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(E),(this.method==="GET"||this.method==="HEAD")&&(g.cache==="no-store"||g.cache==="no-cache")){var _=/([?&])_=[^&]*/;if(_.test(this.url))this.url=this.url.replace(_,"$1_="+new Date().getTime());else{var j=/\?/;this.url+=(j.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}$.prototype.clone=function(){return new $(this,{body:this._bodyInit})};function J(h){var g=new FormData;return h.trim().split("&").forEach(function(E){if(E){var _=E.split("="),j=_.shift().replace(/\+/g," "),x=_.join("=").replace(/\+/g," ");g.append(decodeURIComponent(j),decodeURIComponent(x))}}),g}function ce(h){var g=new y,E=h.replace(/\r?\n[\t ]+/g," ");return E.split("\r").map(function(_){return _.indexOf(`
`)===0?_.substr(1,_.length):_}).forEach(function(_){var j=_.split(":"),x=j.shift().trim();if(x){var M=j.join(":").trim();try{g.append(x,M)}catch(rt){console.warn("Response "+rt.message)}}}),g}H.call($.prototype);function A(h,g){if(!(this instanceof A))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(g||(g={}),this.type="default",this.status=g.status===void 0?200:g.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=g.statusText===void 0?"":""+g.statusText,this.headers=new y(g.headers),this.url=g.url||"",this._initBody(h)}H.call(A.prototype),A.prototype.clone=function(){return new A(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new y(this.headers),url:this.url})},A.error=function(){var h=new A(null,{status:200,statusText:""});return h.ok=!1,h.status=0,h.type="error",h};var be=[301,302,303,307,308];A.redirect=function(h,g){if(be.indexOf(g)===-1)throw new RangeError("Invalid status code");return new A(null,{status:g,headers:{location:h}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(g,E){this.message=g,this.name=E;var _=Error(g);this.stack=_.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function Y(h,g){return new Promise(function(E,_){var j=new $(h,g);if(j.signal&&j.signal.aborted)return _(new o.DOMException("Aborted","AbortError"));var x=new XMLHttpRequest;function M(){x.abort()}x.onload=function(){var F={statusText:x.statusText,headers:ce(x.getAllResponseHeaders()||"")};j.url.indexOf("file://")===0&&(x.status<200||x.status>599)?F.status=200:F.status=x.status,F.url="responseURL"in x?x.responseURL:F.headers.get("X-Request-URL");var de="response"in x?x.response:x.responseText;setTimeout(function(){E(new A(de,F))},0)},x.onerror=function(){setTimeout(function(){_(new TypeError("Network request failed"))},0)},x.ontimeout=function(){setTimeout(function(){_(new TypeError("Network request timed out"))},0)},x.onabort=function(){setTimeout(function(){_(new o.DOMException("Aborted","AbortError"))},0)};function rt(F){try{return F===""&&a.location.href?a.location.href:F}catch{return F}}if(x.open(j.method,rt(j.url),!0),j.credentials==="include"?x.withCredentials=!0:j.credentials==="omit"&&(x.withCredentials=!1),"responseType"in x&&(l.blob?x.responseType="blob":l.arrayBuffer&&(x.responseType="arraybuffer")),g&&typeof g.headers=="object"&&!(g.headers instanceof y||a.Headers&&g.headers instanceof a.Headers)){var Nt=[];Object.getOwnPropertyNames(g.headers).forEach(function(F){Nt.push(p(F)),x.setRequestHeader(F,m(g.headers[F]))}),j.headers.forEach(function(F,de){Nt.indexOf(de)===-1&&x.setRequestHeader(de,F)})}else j.headers.forEach(function(F,de){x.setRequestHeader(de,F)});j.signal&&(j.signal.addEventListener("abort",M),x.onreadystatechange=function(){x.readyState===4&&j.signal.removeEventListener("abort",M)}),x.send(typeof j._bodyInit>"u"?null:j._bodyInit)})}return Y.polyfill=!0,a.fetch||(a.fetch=Y,a.Headers=y,a.Request=$,a.Response=A),o.Headers=y,o.Request=$,o.Response=A,o.fetch=Y,o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var n=t.fetch?t:r;e=n.fetch,e.default=n.fetch,e.fetch=n.fetch,e.Headers=n.Headers,e.Request=n.Request,e.Response=n.Response,s.exports=e})(Qt,Qt.exports);typeof process<"u"&&Ei();const Ti="https://gmupwzjxirpkskolsuix.supabase.co",Ai="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdtdXB3emp4aXJwa3Nrb2xzdWl4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDEyNDU5OTAsImV4cCI6MjA1NjgyMTk5MH0.TRH6LIgIYD4QWaqQxUXxm6HMURqypbkipGMiNuy9PUU",re=oi(Ti,Ai,{auth:{persistSession:!0,storageKey:"shmong_auth",storage:typeof window<"u"?window.localStorage:void 0}}),Ar=D.createContext(void 0);function Oi({children:s}){const[e,t]=D.useState(null),[r,n]=D.useState(!0),i=rr();D.useEffect(()=>{(async()=>{try{const{data:f}=await re.auth.getSession(),p=f.session?.user||null;t(p),n(!1),p&&i("/dashboard");const{data:m}=re.auth.onAuthStateChange(async(w,y)=>{const b=y?.user||null;t(b),b&&i("/dashboard")});return()=>{m.subscription.unsubscribe()}}catch(f){console.error("Error checking auth state:",f),n(!1)}})()},[i]);const o=async(d,f)=>{try{const{data:p,error:m}=await re.auth.signInWithPassword({email:d,password:f});return!m&&p.user&&i("/dashboard"),{data:p.user,error:m}}catch(p){return{data:null,error:p}}},a=async()=>{const d=window.location.origin,f=d.includes("localhost")?"https://eclectic-pasca-5d5fbb.netlify.app/dashboard":`${d}/dashboard`;await re.auth.signInWithOAuth({provider:"google",options:{redirectTo:f,queryParams:{access_type:"offline",prompt:"consent"}}})},l=async(d,f,p,m)=>{try{console.log("Starting signup process...");const{data:w,error:y}=await re.auth.signUp({email:d,password:f,options:{data:{full_name:p,user_type:m}}});if(y)return console.error("Signup error:",y),{data:null,error:y};if(!w.user)return console.error("No user data returned from signup"),{data:null,error:new Error("No user data returned")};console.log("User created successfully:",w.user.id);const{error:b}=await re.from("users").insert({id:w.user.id,email:d,full_name:p,role:m});return b?(console.error("Error creating user profile:",b),await re.auth.admin.deleteUser(w.user.id),{data:null,error:b}):(console.log("User profile created successfully"),i("/dashboard"),{data:w.user,error:null})}catch(w){return console.error("Unexpected error during signup:",w),{data:null,error:w}}},u=async()=>{await re.auth.signOut(),i("/")};return c.jsx(Ar.Provider,{value:{user:e,loading:r,signIn:o,signInWithGoogle:a,signUp:l,signOut:u},children:s})}const tt=()=>{const s=D.useContext(Ar);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s};function Or(s){var e,t,r="";if(typeof s=="string"||typeof s=="number")r+=s;else if(typeof s=="object")if(Array.isArray(s)){var n=s.length;for(e=0;e<n;e++)s[e]&&(t=Or(s[e]))&&(r&&(r+=" "),r+=t)}else for(t in s)s[t]&&(r&&(r+=" "),r+=t);return r}function Pi(){for(var s,e,t=0,r="",n=arguments.length;t<n;t++)(s=arguments[t])&&(e=Or(s))&&(r&&(r+=" "),r+=e);return r}const Pt="-",Ni=s=>{const e=$i(s),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=s;return{getClassGroupId:o=>{const a=o.split(Pt);return a[0]===""&&a.length!==1&&a.shift(),Pr(a,e)||Ci(o)},getConflictingClassGroupIds:(o,a)=>{const l=t[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},Pr=(s,e)=>{if(s.length===0)return e.classGroupId;const t=s[0],r=e.nextPart.get(t),n=r?Pr(s.slice(1),r):void 0;if(n)return n;if(e.validators.length===0)return;const i=s.join(Pt);return e.validators.find(({validator:o})=>o(i))?.classGroupId},Xt=/^\[(.+)\]$/,Ci=s=>{if(Xt.test(s)){const e=Xt.exec(s)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},$i=s=>{const{theme:e,prefix:t}=s,r={nextPart:new Map,validators:[]};return Ii(Object.entries(s.classGroups),t).forEach(([i,o])=>{_t(o,r,i,e)}),r},_t=(s,e,t,r)=>{s.forEach(n=>{if(typeof n=="string"){const i=n===""?e:Zt(e,n);i.classGroupId=t;return}if(typeof n=="function"){if(Ri(n)){_t(n(r),e,t,r);return}e.validators.push({validator:n,classGroupId:t});return}Object.entries(n).forEach(([i,o])=>{_t(o,Zt(e,i),t,r)})})},Zt=(s,e)=>{let t=s;return e.split(Pt).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},Ri=s=>s.isThemeGetter,Ii=(s,e)=>e?s.map(([t,r])=>{const n=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[t,n]}):s,Di=s=>{if(s<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const n=(i,o)=>{t.set(i,o),e++,e>s&&(e=0,r=t,t=new Map)};return{get(i){let o=t.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return n(i,o),o},set(i,o){t.has(i)?t.set(i,o):n(i,o)}}},Nr="!",Li=s=>{const{separator:e,experimentalParseClassName:t}=s,r=e.length===1,n=e[0],i=e.length,o=a=>{const l=[];let u=0,d=0,f;for(let b=0;b<a.length;b++){let k=a[b];if(u===0){if(k===n&&(r||a.slice(b,b+i)===e)){l.push(a.slice(d,b)),d=b+i;continue}if(k==="/"){f=b;continue}}k==="["?u++:k==="]"&&u--}const p=l.length===0?a:a.substring(d),m=p.startsWith(Nr),w=m?p.substring(1):p,y=f&&f>d?f-d:void 0;return{modifiers:l,hasImportantModifier:m,baseClassName:w,maybePostfixModifierPosition:y}};return t?a=>t({className:a,parseClassName:o}):o},Ui=s=>{if(s.length<=1)return s;const e=[];let t=[];return s.forEach(r=>{r[0]==="["?(e.push(...t.sort(),r),t=[]):t.push(r)}),e.push(...t.sort()),e},Bi=s=>({cache:Di(s.cacheSize),parseClassName:Li(s),...Ni(s)}),Mi=/\s+/,Fi=(s,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:n}=e,i=[],o=s.trim().split(Mi);let a="";for(let l=o.length-1;l>=0;l-=1){const u=o[l],{modifiers:d,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:m}=t(u);let w=!!m,y=r(w?p.substring(0,m):p);if(!y){if(!w){a=u+(a.length>0?" "+a:a);continue}if(y=r(p),!y){a=u+(a.length>0?" "+a:a);continue}w=!1}const b=Ui(d).join(":"),k=f?b+Nr:b,N=k+y;if(i.includes(N))continue;i.push(N);const v=n(y,w);for(let O=0;O<v.length;++O){const C=v[O];i.push(k+C)}a=u+(a.length>0?" "+a:a)}return a};function zi(){let s=0,e,t,r="";for(;s<arguments.length;)(e=arguments[s++])&&(t=Cr(e))&&(r&&(r+=" "),r+=t);return r}const Cr=s=>{if(typeof s=="string")return s;let e,t="";for(let r=0;r<s.length;r++)s[r]&&(e=Cr(s[r]))&&(t&&(t+=" "),t+=e);return t};function Vi(s,...e){let t,r,n,i=o;function o(l){const u=e.reduce((d,f)=>f(d),s());return t=Bi(u),r=t.cache.get,n=t.cache.set,i=a,a(l)}function a(l){const u=r(l);if(u)return u;const d=Fi(l,t);return n(l,d),d}return function(){return i(zi.apply(null,arguments))}}const I=s=>{const e=t=>t[s]||[];return e.isThemeGetter=!0,e},$r=/^\[(?:([a-z-]+):)?(.+)\]$/i,qi=/^\d+\/\d+$/,Gi=new Set(["px","full","screen"]),Hi=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Ji=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Wi=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Ki=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Yi=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Z=s=>Ee(s)||Gi.has(s)||qi.test(s),se=s=>Oe(s,"length",no),Ee=s=>!!s&&!Number.isNaN(Number(s)),ct=s=>Oe(s,"number",Ee),Ce=s=>!!s&&Number.isInteger(Number(s)),Qi=s=>s.endsWith("%")&&Ee(s.slice(0,-1)),S=s=>$r.test(s),ne=s=>Hi.test(s),Xi=new Set(["length","size","percentage"]),Zi=s=>Oe(s,Xi,Rr),eo=s=>Oe(s,"position",Rr),to=new Set(["image","url"]),ro=s=>Oe(s,to,oo),so=s=>Oe(s,"",io),$e=()=>!0,Oe=(s,e,t)=>{const r=$r.exec(s);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):t(r[2]):!1},no=s=>Ji.test(s)&&!Wi.test(s),Rr=()=>!1,io=s=>Ki.test(s),oo=s=>Yi.test(s),ao=()=>{const s=I("colors"),e=I("spacing"),t=I("blur"),r=I("brightness"),n=I("borderColor"),i=I("borderRadius"),o=I("borderSpacing"),a=I("borderWidth"),l=I("contrast"),u=I("grayscale"),d=I("hueRotate"),f=I("invert"),p=I("gap"),m=I("gradientColorStops"),w=I("gradientColorStopPositions"),y=I("inset"),b=I("margin"),k=I("opacity"),N=I("padding"),v=I("saturate"),O=I("scale"),C=I("sepia"),H=I("skew"),U=I("space"),X=I("translate"),$=()=>["auto","contain","none"],J=()=>["auto","hidden","clip","visible","scroll"],ce=()=>["auto",S,e],A=()=>[S,e],be=()=>["",Z,se],Y=()=>["auto",Ee,S],h=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],g=()=>["solid","dashed","dotted","double","none"],E=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],_=()=>["start","end","center","between","around","evenly","stretch"],j=()=>["","0",S],x=()=>["auto","avoid","all","avoid-page","page","left","right","column"],M=()=>[Ee,S];return{cacheSize:500,separator:":",theme:{colors:[$e],spacing:[Z,se],blur:["none","",ne,S],brightness:M(),borderColor:[s],borderRadius:["none","","full",ne,S],borderSpacing:A(),borderWidth:be(),contrast:M(),grayscale:j(),hueRotate:M(),invert:j(),gap:A(),gradientColorStops:[s],gradientColorStopPositions:[Qi,se],inset:ce(),margin:ce(),opacity:M(),padding:A(),saturate:M(),scale:M(),sepia:j(),skew:M(),space:A(),translate:A()},classGroups:{aspect:[{aspect:["auto","square","video",S]}],container:["container"],columns:[{columns:[ne]}],"break-after":[{"break-after":x()}],"break-before":[{"break-before":x()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...h(),S]}],overflow:[{overflow:J()}],"overflow-x":[{"overflow-x":J()}],"overflow-y":[{"overflow-y":J()}],overscroll:[{overscroll:$()}],"overscroll-x":[{"overscroll-x":$()}],"overscroll-y":[{"overscroll-y":$()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ce,S]}],basis:[{basis:ce()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",S]}],grow:[{grow:j()}],shrink:[{shrink:j()}],order:[{order:["first","last","none",Ce,S]}],"grid-cols":[{"grid-cols":[$e]}],"col-start-end":[{col:["auto",{span:["full",Ce,S]},S]}],"col-start":[{"col-start":Y()}],"col-end":[{"col-end":Y()}],"grid-rows":[{"grid-rows":[$e]}],"row-start-end":[{row:["auto",{span:[Ce,S]},S]}],"row-start":[{"row-start":Y()}],"row-end":[{"row-end":Y()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",S]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",S]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",..._()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",..._(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[..._(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[N]}],px:[{px:[N]}],py:[{py:[N]}],ps:[{ps:[N]}],pe:[{pe:[N]}],pt:[{pt:[N]}],pr:[{pr:[N]}],pb:[{pb:[N]}],pl:[{pl:[N]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[U]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[U]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",S,e]}],"min-w":[{"min-w":[S,e,"min","max","fit"]}],"max-w":[{"max-w":[S,e,"none","full","min","max","fit","prose",{screen:[ne]},ne]}],h:[{h:[S,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[S,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[S,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[S,e,"auto","min","max","fit"]}],"font-size":[{text:["base",ne,se]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",ct]}],"font-family":[{font:[$e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",S]}],"line-clamp":[{"line-clamp":["none",Ee,ct]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Z,S]}],"list-image":[{"list-image":["none",S]}],"list-style-type":[{list:["none","disc","decimal",S]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[s]}],"placeholder-opacity":[{"placeholder-opacity":[k]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[s]}],"text-opacity":[{"text-opacity":[k]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...g(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Z,se]}],"underline-offset":[{"underline-offset":["auto",Z,S]}],"text-decoration-color":[{decoration:[s]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",S]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",S]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[k]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...h(),eo]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Zi]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},ro]}],"bg-color":[{bg:[s]}],"gradient-from-pos":[{from:[w]}],"gradient-via-pos":[{via:[w]}],"gradient-to-pos":[{to:[w]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[k]}],"border-style":[{border:[...g(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[k]}],"divide-style":[{divide:g()}],"border-color":[{border:[n]}],"border-color-x":[{"border-x":[n]}],"border-color-y":[{"border-y":[n]}],"border-color-s":[{"border-s":[n]}],"border-color-e":[{"border-e":[n]}],"border-color-t":[{"border-t":[n]}],"border-color-r":[{"border-r":[n]}],"border-color-b":[{"border-b":[n]}],"border-color-l":[{"border-l":[n]}],"divide-color":[{divide:[n]}],"outline-style":[{outline:["",...g()]}],"outline-offset":[{"outline-offset":[Z,S]}],"outline-w":[{outline:[Z,se]}],"outline-color":[{outline:[s]}],"ring-w":[{ring:be()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[s]}],"ring-opacity":[{"ring-opacity":[k]}],"ring-offset-w":[{"ring-offset":[Z,se]}],"ring-offset-color":[{"ring-offset":[s]}],shadow:[{shadow:["","inner","none",ne,so]}],"shadow-color":[{shadow:[$e]}],opacity:[{opacity:[k]}],"mix-blend":[{"mix-blend":[...E(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":E()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",ne,S]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[v]}],sepia:[{sepia:[C]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[k]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[C]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",S]}],duration:[{duration:M()}],ease:[{ease:["linear","in","out","in-out",S]}],delay:[{delay:M()}],animate:[{animate:["none","spin","ping","pulse","bounce",S]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[O]}],"scale-x":[{"scale-x":[O]}],"scale-y":[{"scale-y":[O]}],rotate:[{rotate:[Ce,S]}],"translate-x":[{"translate-x":[X]}],"translate-y":[{"translate-y":[X]}],"skew-x":[{"skew-x":[H]}],"skew-y":[{"skew-y":[H]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",S]}],accent:[{accent:["auto",s]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",S]}],"caret-color":[{caret:[s]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",S]}],fill:[{fill:[s,"none"]}],"stroke-w":[{stroke:[Z,se,ct]}],stroke:[{stroke:[s,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},lo=Vi(ao);function he(...s){return lo(Pi(s))}const co=[{value:"photographer",label:"Photographer"},{value:"promoter",label:"Promoter"},{value:"videographer",label:"Videographer"},{value:"venue",label:"Venue"},{value:"event_manager",label:"Event Manager"},{value:"attendee",label:"Attendee"}],uo=({defaultView:s="signin",isModal:e=!1,onClose:t})=>{const[r,n]=D.useState(s),[i,o]=D.useState(!1),[a,l]=D.useState(""),[u,d]=D.useState(""),[f,p]=D.useState(""),[m,w]=D.useState(""),[y,b]=D.useState("attendee"),[k,N]=D.useState(null),[v,O]=D.useState(!1),[C,H]=D.useState(!1),[U,X]=D.useState(!1),[$,J]=D.useState({fullName:!1,email:!1,password:!1,confirmPassword:!1}),{signIn:ce,signUp:A,signInWithGoogle:be}=tt(),Y=()=>{const j="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_+";let x="";x+=j.match(/[a-z]/)[0],x+=j.match(/[A-Z]/)[0],x+=j.match(/[0-9]/)[0],x+=j.match(/[!@#$%^&*()_+]/)[0];for(let M=x.length;M<16;M++)x+=j.charAt(Math.floor(Math.random()*j.length));x=x.split("").sort(()=>Math.random()-.5).join(""),d(x),p(x),H(!0),J({...$,password:!0,confirmPassword:!0})},h=()=>{if(r==="signup"){if(!m.trim())return N("Please enter your full name"),!1;if(u!==f)return N("Passwords do not match"),!1}return!0},g=async _=>{if(_.preventDefault(),N(null),!!h()){O(!0);try{if(r==="signin"){const{error:j}=await ce(a,u);if(j)throw j}else{const{error:j}=await A(a,u,m,y);if(j)throw j}}catch(j){N(j.message||"An error occurred")}finally{O(!1)}}},E=async()=>{try{await be()}catch(_){N(_.message||"An error occurred during Google sign-in")}};return c.jsxs("div",{className:he("w-full max-w-md mx-auto",e&&"relative bg-white rounded-2xl shadow-2xl overflow-hidden"),children:[e&&c.jsx("button",{onClick:t,className:"absolute right-4 top-4 p-2 rounded-full bg-apple-gray-100 text-apple-gray-600 hover:bg-apple-gray-200 z-10",children:c.jsx(Ir,{className:"w-5 h-5"})}),c.jsx("div",{className:"flex justify-center mb-6 pt-6",children:c.jsxs("div",{className:"flex rounded-full overflow-hidden bg-apple-gray-200 p-1",children:[c.jsx("button",{onClick:()=>{n("signin"),o(!1),N(null)},className:he("px-7 py-3 text-base font-medium transition-all duration-300 rounded-full",r==="signin"?"bg-white text-apple-gray-900 shadow-apple-button":"bg-transparent text-apple-gray-600 hover:text-apple-gray-900"),children:"Sign In"}),c.jsx("button",{onClick:()=>{n("signup"),o(!1),N(null)},className:he("px-7 py-3 text-base font-medium transition-all duration-300 rounded-full",r==="signup"?"bg-white text-apple-gray-900 shadow-apple-button":"bg-transparent text-apple-gray-600 hover:text-apple-gray-900"),children:"Sign Up"})]})}),c.jsx("div",{className:"px-8 pb-8",children:c.jsx(er,{mode:"wait",children:i?c.jsxs(W.form,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},onSubmit:g,className:"bg-white rounded-apple-2xl",children:[c.jsx("h2",{className:"text-2xl font-semibold text-apple-gray-900 mb-6 text-center",children:r==="signin"?"Sign In with Email":"Sign Up with Email"}),k&&c.jsxs("div",{className:"mb-5 p-4 bg-red-50 text-red-600 text-sm rounded-apple border border-red-100 flex items-start",children:[c.jsx(Ct,{className:"h-5 w-5 mr-2 mt-0.5 flex-shrink-0"}),c.jsx("span",{children:k})]}),r==="signup"&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"mb-5",children:[c.jsxs("label",{htmlFor:"fullName",className:"ios-label flex items-center",children:[c.jsx(Dr,{className:"w-4 h-4 mr-2 text-apple-gray-500"}),"Full Name"]}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{id:"fullName",type:"text",value:m,onChange:_=>w(_.target.value),onBlur:()=>J({...$,fullName:!0}),className:he("ios-input pl-4",$.fullName&&!m.trim()&&"border-apple-red-300 focus:ring-apple-red-500"),placeholder:"Your full name",required:!0}),$.fullName&&m.trim()&&c.jsx(Pe,{className:"absolute right-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-apple-green-500"})]})]}),c.jsxs("div",{className:"mb-5",children:[c.jsxs("label",{htmlFor:"userType",className:"ios-label flex items-center",children:[c.jsx(Lr,{className:"w-4 h-4 mr-2 text-apple-gray-500"}),"I am a..."]}),c.jsxs("div",{className:"relative",children:[c.jsx("select",{id:"userType",value:y,onChange:_=>b(_.target.value),className:"ios-input pl-4 pr-10 appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 fill=%27none%27 viewBox=%270 0 20 20%27%3E%3Cpath stroke=%27%236B7280%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%271.5%27 d=%27M6 8l4 4 4-4%27/%3E%3C/svg%3E')] bg-[length:20px_20px] bg-[right_12px_center] bg-no-repeat",required:!0,children:co.map(_=>c.jsx("option",{value:_.value,children:_.label},_.value))}),c.jsx(Pe,{className:"absolute right-10 top-1/2 transform -translate-y-1/2 h-5 w-5 text-apple-green-500"})]})]})]}),c.jsxs("div",{className:"mb-5",children:[c.jsxs("label",{htmlFor:"email",className:"ios-label flex items-center",children:[c.jsx(Ur,{className:"w-4 h-4 mr-2 text-apple-gray-500"}),"Email"]}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{id:"email",type:"email",value:a,onChange:_=>l(_.target.value),onBlur:()=>J({...$,email:!0}),className:he("ios-input pl-4",$.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)&&"border-apple-red-300 focus:ring-apple-red-500"),placeholder:"your.email@example.com",required:!0}),$.email&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)&&c.jsx(Pe,{className:"absolute right-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-apple-green-500"})]})]}),c.jsxs("div",{className:"mb-5",children:[c.jsxs("label",{htmlFor:"password",className:"ios-label flex items-center",children:[c.jsx(dt,{className:"w-4 h-4 mr-2 text-apple-gray-500"}),"Password"]}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{id:"password",type:C?"text":"password",value:u,onChange:_=>d(_.target.value),onBlur:()=>J({...$,password:!0}),className:he("ios-input pr-24",$.password&&u.length<6&&"border-apple-red-300 focus:ring-apple-red-500"),placeholder:"",required:!0,minLength:6}),c.jsxs("div",{className:"absolute inset-y-0 right-0 flex items-center",children:[r==="signup"&&c.jsx("button",{type:"button",onClick:Y,className:"p-2 text-apple-gray-500 hover:text-apple-gray-700",title:"Generate secure password",children:c.jsx(Br,{className:"h-5 w-5"})}),c.jsx("button",{type:"button",onClick:()=>H(!C),className:"p-2 text-apple-gray-500 hover:text-apple-gray-700",children:C?c.jsx($t,{className:"h-5 w-5"}):c.jsx(Rt,{className:"h-5 w-5"})})]}),$.password&&u.length>=6&&c.jsx(Pe,{className:"absolute right-20 top-1/2 transform -translate-y-1/2 h-5 w-5 text-apple-green-500"})]}),r==="signup"&&c.jsx("p",{className:"mt-1 text-xs text-apple-gray-500",children:"Password must be at least 6 characters long"})]}),r==="signup"&&c.jsxs("div",{className:"mb-5",children:[c.jsxs("label",{htmlFor:"confirmPassword",className:"ios-label flex items-center",children:[c.jsx(dt,{className:"w-4 h-4 mr-2 text-apple-gray-500"}),"Confirm Password"]}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{id:"confirmPassword",type:U?"text":"password",value:f,onChange:_=>p(_.target.value),onBlur:()=>J({...$,confirmPassword:!0}),className:he("ios-input pr-12",$.confirmPassword&&u!==f&&"border-apple-red-300 focus:ring-apple-red-500"),placeholder:"",required:!0,minLength:6}),c.jsx("button",{type:"button",onClick:()=>X(!U),className:"absolute inset-y-0 right-0 flex items-center px-4 text-apple-gray-500 hover:text-apple-gray-700",children:U?c.jsx($t,{className:"h-5 w-5"}):c.jsx(Rt,{className:"h-5 w-5"})}),$.confirmPassword&&u===f&&u.length>=6&&c.jsx(Pe,{className:"absolute right-12 top-1/2 transform -translate-y-1/2 h-5 w-5 text-apple-green-500"})]})]}),c.jsxs("div",{className:"flex flex-col space-y-4",children:[c.jsx("button",{type:"submit",disabled:v||r==="signup"&&u!==f,className:"w-full ios-button-primary disabled:opacity-70 disabled:cursor-not-allowed",children:v?c.jsxs("span",{className:"flex items-center justify-center",children:[c.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r==="signin"?"Signing in...":"Creating account..."]}):r==="signin"?"Sign In":"Create Account"}),c.jsx("button",{type:"button",onClick:()=>o(!1),className:"text-apple-gray-600 hover:text-apple-gray-900 text-center py-2",children:"Back to options"})]})]},"email-form"):c.jsxs(W.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:"flex flex-col gap-4",children:[c.jsx("h2",{className:"text-2xl font-semibold text-apple-gray-900 mb-6 text-center",children:r==="signin"?"Welcome Back":"Create Your Account"}),k&&c.jsxs("div",{className:"mb-5 p-4 bg-red-50 text-red-600 text-sm rounded-apple border border-red-100 flex items-start",children:[c.jsx(Ct,{className:"h-5 w-5 mr-2 mt-0.5 flex-shrink-0"}),c.jsx("span",{children:k})]}),c.jsxs("button",{onClick:E,className:"flex items-center justify-center w-full py-3.5 px-4 border border-apple-gray-300 rounded-full bg-white hover:bg-apple-gray-50 transition-colors duration-300 shadow-sm",children:[c.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[c.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),c.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),c.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),c.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"}),c.jsx("path",{fill:"none",d:"M1 1h22v22H1z"})]}),c.jsx("span",{className:"text-apple-gray-800 font-medium",children:r==="signin"?"Sign in with Google":"Sign up with Google"})]}),c.jsxs("div",{className:"relative flex items-center my-4",children:[c.jsx("div",{className:"flex-grow border-t border-apple-gray-200"}),c.jsx("span",{className:"flex-shrink-0 mx-4 text-apple-gray-500 text-sm",children:"or"}),c.jsx("div",{className:"flex-grow border-t border-apple-gray-200"})]}),c.jsx("button",{onClick:()=>o(!0),className:"w-full ios-button-secondary",children:r==="signin"?"Sign in with Email":"Sign up with Email"})]},"oauth-buttons")})})]})},ho=()=>{const[s,e]=D.useState(!1),[t,r]=D.useState(""),[n,i]=D.useState(!1),[o,a]=D.useState(0),{user:l}=tt(),u=rr();D.useEffect(()=>{const v=new IntersectionObserver(U=>{U[0].isIntersecting&&e(!0)},{threshold:.1}),O=document.getElementById("cta-section");O&&v.observe(O);const C=new IntersectionObserver(U=>{U.forEach(X=>{X.isIntersecting&&r(X.target.id)})},{rootMargin:"-10% 0px -90% 0px"});document.querySelectorAll("section[id]").forEach(U=>{C.observe(U)});const H=setInterval(()=>{a(U=>(U+1)%3)},5e3);return()=>{v.disconnect(),C.disconnect(),clearInterval(H)}},[]);const d=[{label:"Features",href:"#features"},{label:"How It Works",href:"#how-it-works"},{label:"About",href:"#about"}],f=[{title:"Instant Recognition",description:"Our AI identifies your face in photos with 99.7% accuracy, even in low light and crowded scenes.",icon:c.jsx(Mr,{className:"h-7 w-7"}),color:"bg-apple-blue-500",delay:0},{title:"One-Click Access",description:"Find all your photos instantly without scrolling through hundreds of images. Save time and eliminate frustration.",icon:c.jsx(Fr,{className:"h-7 w-7"}),color:"bg-apple-green-500",delay:.1},{title:"Bank-Level Security",description:"Your facial data is encrypted and never shared. Only you can access your photos, maintaining complete privacy.",icon:c.jsx(zr,{className:"h-7 w-7"}),color:"bg-apple-purple-500",delay:.2}],p=[{value:"99.7%",label:"Recognition Accuracy",color:"from-apple-blue-500 to-apple-blue-600",icon:c.jsx(Vr,{className:"w-8 h-8 text-apple-blue-500"})},{value:"3.2 sec",label:"Average Search Time",color:"from-apple-green-500 to-teal-500",icon:c.jsx(qr,{className:"w-8 h-8 text-apple-green-500"})},{value:"100%",label:"Data Encryption",color:"from-apple-purple-500 to-pink-500",icon:c.jsx(dt,{className:"w-8 h-8 text-apple-purple-500"})}],m=[{number:"01",title:"Register Your Face",description:"Create an account and securely register your face with our encrypted biometric system.",icon:c.jsx(Gr,{className:"h-7 w-7"}),delay:0},{number:"02",title:"Attend Events",description:"Enjoy your events while photographers capture all the special moments throughout the venue.",icon:c.jsx(It,{className:"h-7 w-7"}),delay:.2},{number:"03",title:"Find Your Photos",description:"Open SHMONG after the event and instantly see all photos featuring you, ready to download.",icon:c.jsx(Hr,{className:"h-7 w-7"}),delay:.4}],w=[{number:"50+",label:"Event Organizers"},{number:"120+",label:"Venues"},{number:"10,000+",label:"Users"},{number:"250,000+",label:"Photos Found"}],y=[{name:"facebook",href:"#",icon:"M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z"},{name:"twitter",href:"#",icon:"M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z"},{name:"instagram",href:"#",icon:"M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z"}],b=v=>{const O=document.querySelector(v);if(O){const U=O.getBoundingClientRect().top-80;window.scrollTo({top:window.pageYOffset+U,behavior:"smooth"})}},k=v=>{l?u("/dashboard"):(v.preventDefault(),i(!0))},N=[{title:"Register Your Face",content:c.jsxs("div",{className:"relative w-[320px] h-[650px] bg-[#1A1A1A] rounded-[55px] shadow-2xl overflow-hidden",children:[c.jsx("div",{className:"absolute top-2 left-1/2 -translate-x-1/2 w-[126px] h-[37px] bg-black rounded-[50px]"}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-apple-blue-600/20 to-transparent",children:c.jsx("div",{className:"absolute inset-[4px] rounded-[50px] overflow-hidden",children:c.jsx("div",{className:"h-full w-full bg-gradient-to-tr from-black/5 to-transparent",children:c.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-white",children:[c.jsx("img",{src:"https://www.shmong.tv/wp-content/uploads/2023/05/logo-white.png",alt:"SHMONG",className:"w-[126px] mb-8"}),c.jsx("div",{className:"w-20 h-20 rounded-full border-2 border-white/20 flex items-center justify-center mb-4",children:c.jsx(It,{className:"w-10 h-10 text-white/90"})}),c.jsx("p",{className:"text-white/80 text-sm mb-2",children:"Position your face in the frame"}),c.jsx("div",{className:"w-[3px] h-2 bg-white/10 rounded-full"})]})})})})]})},{title:"Processing",content:c.jsxs("div",{className:"relative w-[320px] h-[650px] bg-[#1A1A1A] rounded-[55px] shadow-2xl overflow-hidden",children:[c.jsx("div",{className:"absolute top-2 left-1/2 -translate-x-1/2 w-[126px] h-[37px] bg-black rounded-[50px]"}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-apple-blue-600/20 to-transparent",children:c.jsx("div",{className:"absolute inset-[4px] rounded-[50px] overflow-hidden",children:c.jsx("div",{className:"h-full w-full bg-gradient-to-tr from-black/5 to-transparent",children:c.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-white",children:[c.jsx("img",{src:"https://www.shmong.tv/wp-content/uploads/2023/05/logo-white.png",alt:"SHMONG",className:"w-[126px] mb-8"}),c.jsx("div",{className:"w-14 h-14 rounded-full bg-white/10 flex items-center justify-center mb-4",children:c.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-white"})}),c.jsx("p",{className:"text-white/80 text-sm mb-2",children:"Processing your photos..."}),c.jsx("div",{className:"w-[3px] h-2 bg-white/10 rounded-full"})]})})})})]})},{title:"Photos Found",content:c.jsxs("div",{className:"relative w-[320px] h-[650px] bg-[#1A1A1A] rounded-[55px] shadow-2xl overflow-hidden",children:[c.jsx("div",{className:"absolute top-2 left-1/2 -translate-x-1/2 w-[126px] h-[37px] bg-black rounded-[50px]"}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-apple-blue-600/20 to-transparent",children:c.jsx("div",{className:"absolute inset-[4px] rounded-[50px] overflow-hidden",children:c.jsx("div",{className:"h-full w-full bg-gradient-to-tr from-black/5 to-transparent",children:c.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-white",children:[c.jsx("img",{src:"https://www.shmong.tv/wp-content/uploads/2023/05/logo-white.png",alt:"SHMONG",className:"w-[126px] mb-8"}),c.jsx("div",{className:"w-16 h-16 rounded-full bg-white/20 flex items-center justify-center mb-4",children:c.jsx(Jr,{className:"w-12 h-12 text-white"})}),c.jsx("p",{className:"text-white/90 text-lg font-medium mb-2",children:"5 Photos Found!"}),c.jsx("p",{className:"text-white/60 text-sm",children:"Ready to view and download"})]})})})})]})}];return c.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-white to-apple-gray-50 text-apple-gray-900 font-sans overflow-x-hidden",children:[c.jsx("header",{className:"fixed inset-x-0 top-0 z-50 backdrop-blur-md bg-white/90 border-b border-apple-gray-100",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center h-20",children:[c.jsx("div",{className:"flex items-center",children:c.jsx("img",{src:"https://www.shmong.tv/wp-content/uploads/2023/05/main-logo.png",alt:"SHMONG",className:"h-8"})}),c.jsx("nav",{className:"hidden md:flex space-x-6",children:d.map(v=>c.jsx("button",{onClick:()=>b(v.href),className:"text-apple-gray-600 hover:text-apple-gray-900 text-sm font-medium",children:v.label},v.href))}),c.jsx("div",{className:"flex items-center space-x-2",children:c.jsx("button",{onClick:k,className:"ios-button-primary",children:l?"Go to Dashboard":"Get Started"})})]})})}),c.jsx("section",{className:"pt-20 pb-24",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[c.jsxs(W.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},className:"text-center lg:text-left",children:[c.jsxs("h1",{className:"text-4xl md:text-6xl font-bold mb-6",children:["Find Your Event Photos"," ",c.jsx("span",{className:"bg-gradient-to-b from-apple-blue-500 to-apple-blue-600 text-transparent bg-clip-text",children:"Instantly"})]}),c.jsx("p",{className:"text-xl text-apple-gray-600 mb-8",children:"Using advanced facial recognition, SHMONG helps you discover all your photos from events in seconds."}),c.jsx("button",{onClick:k,className:"ios-button-primary",children:"Get Started"})]}),c.jsx(W.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2,ease:"easeOut"},className:"relative flex justify-center",children:N[o].content})]})})}),c.jsx("section",{id:"features",className:"py-24 bg-white",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[c.jsxs("div",{className:"text-center mb-16",children:[c.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Why Choose SHMONG"}),c.jsx("p",{className:"text-xl text-apple-gray-600",children:"Advanced technology meets simplicity for the perfect photo-finding experience"})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:f.map((v,O)=>c.jsxs(W.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.5,delay:v.delay},className:"relative p-8 rounded-apple-xl border border-apple-gray-200 bg-white",children:[c.jsx("div",{className:`${v.color} w-12 h-12 rounded-full flex items-center justify-center text-white mb-6`,children:v.icon}),c.jsx("h3",{className:"text-xl font-semibold mb-3",children:v.title}),c.jsx("p",{className:"text-apple-gray-600",children:v.description})]},v.title))}),c.jsx("div",{className:"mt-12 grid grid-cols-1 md:grid-cols-3 gap-8",children:p.map((v,O)=>c.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:O*.1},className:"text-center p-8 rounded-apple-xl bg-white border border-apple-gray-200",children:[c.jsx("div",{className:"flex justify-center mb-4",children:v.icon}),c.jsx("div",{className:`text-4xl font-bold bg-gradient-to-b ${v.color} bg-clip-text text-transparent mb-2`,children:v.value}),c.jsx("div",{className:"text-apple-gray-600",children:v.label})]},v.label))})]})}),c.jsx("section",{id:"how-it-works",className:"py-24",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[c.jsxs("div",{className:"text-center mb-16",children:[c.jsx("h2",{className:"text-4xl font-bold mb-4",children:"How SHMONG Works"}),c.jsx("p",{className:"text-xl text-apple-gray-600",children:"Three simple steps to never miss another photo of yourself"})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-12",children:m.map((v,O)=>c.jsxs(W.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.5,delay:v.delay},className:"text-center",children:[c.jsxs("div",{className:"relative mb-6",children:[c.jsx("div",{className:"w-20 h-20 mx-auto rounded-full bg-apple-blue-500 flex items-center justify-center text-white",children:v.icon}),c.jsx("div",{className:"absolute -left-[3px] -right-[3px] top-[90px] h-[40px] pointer-events-none",children:O<m.length-1&&c.jsx("div",{className:"relative h-[30px]",children:c.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 w-full",children:c.jsx("div",{className:"h-[3px] bg-apple-blue-500"})})})})]}),c.jsx("h3",{className:"text-xl font-semibold mb-3",children:v.title}),c.jsx("p",{className:"text-apple-gray-600",children:v.description})]},v.title))})]})}),c.jsx("section",{className:"py-24 bg-white",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8",children:w.map(v=>c.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center",children:[c.jsx("div",{className:"text-4xl font-bold text-apple-gray-900 mb-2",children:v.number}),c.jsx("div",{className:"text-apple-gray-600",children:v.label})]},v.label))})})}),c.jsx("section",{id:"cta-section",className:"py-24",children:c.jsx("div",{className:"max-w-3xl mx-auto text-center px-4",children:c.jsxs(W.div,{initial:{opacity:0,y:30},animate:s?{opacity:1,y:0}:{},transition:{duration:.8},children:[c.jsx("h2",{className:"text-4xl font-bold mb-6",children:"Ready to Find Your Photos?"}),c.jsx("p",{className:"text-xl text-apple-gray-600 mb-8",children:"Join thousands of others who are already using SHMONG to discover their event photos effortlessly."}),c.jsx("div",{className:"flex justify-center",children:c.jsx("button",{onClick:k,className:"ios-button-primary",children:"Get Started Now"})})]})})}),c.jsx("footer",{className:"bg-apple-gray-900 text-white py-12",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[c.jsxs("div",{children:[c.jsx("img",{src:"https://www.shmong.tv/wp-content/uploads/2023/05/logo-white.png",alt:"SHMONG",className:"h-8 mb-6"}),c.jsx("p",{className:"text-apple-gray-400",children:"Making event photography accessible and enjoyable for everyone."})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Product"}),c.jsxs("ul",{className:"space-y-2",children:[c.jsx("li",{children:c.jsx(ve,{to:"#features",className:"text-apple-gray-400 hover:text-white",children:"Features"})}),c.jsx("li",{children:c.jsx(ve,{to:"#how-it-works",className:"text-apple-gray-400 hover:text-white",children:"How It Works"})})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Company"}),c.jsxs("ul",{className:"space-y-2",children:[c.jsx("li",{children:c.jsx(ve,{to:"#about",className:"text-apple-gray-400 hover:text-white",children:"About Us"})}),c.jsx("li",{children:c.jsx(ve,{to:"#contact",className:"text-apple-gray-400 hover:text-white",children:"Contact"})})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Legal"}),c.jsxs("ul",{className:"space-y-2",children:[c.jsx("li",{children:c.jsx(ve,{to:"/privacy",className:"text-apple-gray-400 hover:text-white",children:"Privacy Policy"})}),c.jsx("li",{children:c.jsx(ve,{to:"/terms",className:"text-apple-gray-400 hover:text-white",children:"Terms of Service"})})]})]})]}),c.jsx("div",{className:"border-t border-apple-gray-800 mt-12 pt-8",children:c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center",children:[c.jsxs("p",{className:"text-apple-gray-400 text-sm",children:[" ",new Date().getFullYear()," SHMONG. All rights reserved."]}),c.jsx("div",{className:"flex space-x-6 mt-4 sm:mt-0",children:y.map(v=>c.jsxs("a",{href:v.href,className:"text-apple-gray-400 hover:text-white",children:[c.jsx("span",{className:"sr-only",children:v.name}),c.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:c.jsx("path",{d:v.icon})})]},v.name))})]})})]})}),c.jsx(er,{children:n&&c.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/25 backdrop-blur-sm z-50 flex items-center justify-center",children:c.jsx(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"relative mx-4",children:c.jsx(uo,{isModal:!0,onClose:()=>i(!1)})})})})]})},fo=D.lazy(()=>ge(()=>import("./Dashboard-kjILCAtD.js"),__vite__mapDeps([2,3,1,4]))),po=({children:s})=>{const{user:e,loading:t}=tt();return t?c.jsx("div",{className:"min-h-screen flex items-center justify-center",children:c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-gray-900"})}):e?s:c.jsx(xt,{to:"/",replace:!0})},go=({children:s})=>{const{user:e,loading:t}=tt();return t?c.jsx("div",{className:"min-h-screen flex items-center justify-center",children:c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-gray-900"})}):e?c.jsx(xt,{to:"/dashboard",replace:!0}):s};function mo(){return c.jsx(Yr,{children:c.jsx(Oi,{children:c.jsxs(Qr,{children:[c.jsx(st,{path:"/",element:c.jsx(go,{children:c.jsx(ho,{})})}),c.jsx(st,{path:"/dashboard",element:c.jsx(po,{children:c.jsx(D.Suspense,{fallback:c.jsx("div",{className:"min-h-screen flex items-center justify-center",children:c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-gray-900"})}),children:c.jsx(fo,{})})})}),c.jsx(st,{path:"*",element:c.jsx(xt,{to:"/",replace:!0})})]})})})}ut.createRoot(document.getElementById("root")).render(c.jsx(Xr.StrictMode,{children:c.jsx(mo,{})}));export{he as c,Oo as d,re as s,tt as u};
//# sourceMappingURL=index-BGZo0jzH.js.map
