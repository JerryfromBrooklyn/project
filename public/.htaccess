# Disable caching for all files
<FilesMatch ".(html|htm|js|json|css)$">
  FileETag None
  <IfModule mod_headers.c>
     Header unset ETag
     Header set Cache-Control "max-age=0, no-cache, no-store, must-revalidate"
     Header set Pragma "no-cache"
     Header set Expires "Wed, 11 Jan 1984 05:00:00 GMT"
  </IfModule>
</FilesMatch>

# For static assets like images, allow caching but use query string for cache busting
<FilesMatch ".(jpg|jpeg|png|gif|svg|webp)$">
  <IfModule mod_headers.c>
     Header set Cache-Control "max-age=31536000, public"
  </IfModule>
</FilesMatch>

# Enable CORS
<IfModule mod_headers.c>
    Header set Access-Control-Allow-Origin "*"
</IfModule>

# Enable HTTP/2 Server Push
<IfModule mod_headers.c>
    Header add Link "</assets/main.js>; rel=preload; as=script"
    Header add Link "</assets/main.css>; rel=preload; as=style"
</IfModule>

# Redirect all requests to index.html for SPA routing
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    RewriteRule ^index\.html$ - [L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . /index.html [L]
</IfModule> 